# -*- coding: utf-8 -*-
import re

text = '''
<td class="message"><div class="log_message">Tokenisation done (32 tokens)</div><div class="log_details" style=""><table class="table table-sm table-hover"><thead><tr><th>Token</th><th>Blacklisted?</th><th>Cancelled</th><th>Confirmed</th><th>NoEvent</th><th>ja</th><th>ko</th><th>zh</th></tr></thead><tbody><tr><td class="token"><a target="_blank" href="#search/token=您&amp;locale_family=cjk">您</a></td><td>false</td><td>-463</td><td>-283</td><td>235</td><td>-231</td><td>11</td><td>145</td></tr><tr><td class="token"><a target="_blank" href="#search/token=已&amp;locale_family=cjk">已</a></td><td>false</td><td>304</td><td>-56</td><td>-463</td><td>-530</td><td>-320</td><td>738</td></tr><tr><td class="token"><a target="_blank" href="#search/token=經&amp;locale_family=cjk">經</a></td><td>false</td><td>-202</td><td>-137</td><td>401</td><td>-187</td><td>-20</td><td>123</td></tr><tr><td class="token"><a target="_blank" href="#search/token=取&amp;locale_family=cjk">取</a></td><td>false</td><td>1509</td><td>-1256</td><td>-429</td><td>102</td><td>-266</td><td>44</td></tr><tr><td class="token"><a target="_blank" href="#search/token=消&amp;locale_family=cjk">消</a></td><td>false</td><td>1188</td><td>-1848</td><td>28</td><td>-102</td><td>-302</td><td>304</td></tr><tr><td class="token"><a target="_blank" href="#search/token=了&amp;locale_family=cjk">了</a></td><td>false</td><td>-661</td><td>235</td><td>102</td><td>235</td><td>-266</td><td>-20</td></tr><tr><td class="token"><a target="_blank" href="#search/token=您已&amp;locale_family=cjk">您已</a></td><td>false</td><td>-</td><td>-</td><td>-</td><td>-</td><td>-</td><td>-</td></tr><tr><td class="token"><a target="_blank" href="#search/token=已經&amp;locale_family=cjk">已經</a></td><td>false</td><td>-202</td><td>-119</td><td>367</td><td>-70</td><td>-9</td><td>44</td></tr><tr><td class="token"><a target="_blank" href="#search/token=經取&amp;locale_family=cjk">經取</a></td><td>false</td><td>-</td><td>-</td><td>-</td><td>-</td><td>-</td><td>-</td></tr><tr><td class="token"><a target="_blank" href="#search/token=取消&amp;locale_family=cjk">取消</a></td><td>false</td><td>1995</td><td>-1256</td><td>-717</td><td>169</td><td>-248</td><td>-119</td></tr><tr><td class="token"><a target="_blank" href="#search/token=消了&amp;locale_family=cjk">消了</a></td><td>false</td><td>-</td><td>-</td><td>-</td><td>-</td><td>-</td><td>-</td></tr><tr><td class="token"><a target="_blank" href="#search/token=的&amp;locale_family=cjk">的</a></td><td>false</td><td>-809</td><td>-367</td><td>333</td><td>-496</td><td>-341</td><td>565</td></tr><tr><td class="token"><a target="_blank" href="#search/token=台&amp;locale_family=cjk">台</a></td><td>false</td><td>-341</td><td>-137</td><td>235</td><td>-216</td><td>190</td><td>11</td></tr><tr><td class="token"><a target="_blank" href="#search/token=北&amp;locale_family=cjk">北</a></td><td>false</td><td>-266</td><td>-302</td><td>333</td><td>-32</td><td>258</td><td>-187</td></tr><tr><td class="token"><a target="_blank" href="#search/token=日&amp;locale_family=cjk">日</a></td><td>false</td><td>-661</td><td>102</td><td>63</td><td>190</td><td>-367</td><td>-86</td></tr><tr><td class="token"><a target="_blank" href="#search/token=記&amp;locale_family=cjk">記</a></td><td>false</td><td>-571</td><td>-102</td><td>235</td><td>-137</td><td>-119</td><td>190</td></tr><tr><td class="token"><a target="_blank" href="#search/token=旅&amp;locale_family=cjk">旅</a></td><td>false</td><td>-571</td><td>-429</td><td>469</td><td>235</td><td>28</td><td>-341</td></tr><tr><td class="token"><a target="_blank" href="#search/token=店&amp;locale_family=cjk">店</a></td><td>false</td><td>-248</td><td>44</td><td>-137</td><td>-43</td><td>82</td><td>-102</td></tr><tr><td class="token"><a target="_blank" href="#search/token=的台&amp;locale_family=cjk">的台</a></td><td>false</td><td>-</td><td>-</td><td>-</td><td>-</td><td>-</td><td>-</td></tr><tr><td class="token"><a target="_blank" href="#search/token=台北&amp;locale_family=cjk">台北</a></td><td>false</td><td>-43</td><td>28</td><td>44</td><td>0</td><td>304</td><td>-283</td></tr><tr><td class="token"><a target="_blank" href="#search/token=北日&amp;locale_family=cjk">北日</a></td><td>false</td><td>-</td><td>-</td><td>-</td><td>-</td><td>-</td><td>-</td></tr><tr><td class="token"><a target="_blank" href="#search/token=日記&amp;locale_family=cjk">日記</a></td><td>false</td><td>-</td><td>-</td><td>-</td><td>-</td><td>-</td><td>-</td></tr><tr><td class="token"><a target="_blank" href="#search/token=記旅&amp;locale_family=cjk">記旅</a></td><td>false</td><td>-</td><td>-</td><td>-</td><td>-</td><td>-</td><td>-</td></tr><tr><td class="token"><a target="_blank" href="#search/token=旅店&amp;locale_family=cjk">旅店</a></td><td>false</td><td>-43</td><td>235</td><td>-137</td><td>-102</td><td>-20</td><td>123</td></tr><tr><td class="token"><a target="_blank" href="#search/token=館&amp;locale_family=cjk">館</a></td><td>false</td><td>-</td><td>-</td><td>-</td><td>-</td><td>-</td><td>-</td></tr><tr><td class="token"><a target="_blank" href="#search/token=預&amp;locale_family=cjk">預</a></td><td>false</td><td>-119</td><td>11</td><td>0</td><td>-320</td><td>63</td><td>169</td></tr><tr><td class="token"><a target="_blank" href="#search/token=訂&amp;locale_family=cjk">訂</a></td><td>false</td><td>-571</td><td>469</td><td>-571</td><td>-767</td><td>-119</td><td>798</td></tr><tr><td class="token"><a target="_blank" href="#search/token=館預&amp;locale_family=cjk">館預</a></td><td>false</td><td>-</td><td>-</td><td>-</td><td>-</td><td>-</td><td>-</td></tr><tr><td class="token"><a target="_blank" href="#search/token=預訂&amp;locale_family=cjk">預訂</a></td><td>false</td><td>-119</td><td>11</td><td>-9</td><td>-231</td><td>123</td><td>82</td></tr><tr><td class="token"><a target="_blank" href="#search/token=U_info&amp;locale_family=cjk">U_info</a></td><td>false</td><td>-</td><td>-</td><td>-</td><td>-</td><td>-</td><td>-</td></tr><tr><td class="token"><a target="_blank" href="#search/token=TE_com&amp;locale_family=cjk">TE_com</a></td><td>false</td><td>0</td><td>0</td><td>0</td><td>-302</td><td>63</td><td>-429</td></tr><tr><td class="token"><a target="_blank" href="#search/token=S_mail&amp;locale_family=cjk">S_mail</a></td><td>false</td><td>-1256</td><td>-1128</td><td>1188</td><td>44</td><td>-661</td><td>63</td></tr></tbody></table></div></td>'''

# print(text)

# get the div after token
regex_div_table = re.compile(r'<div.*>Tokenisation done .*</div>(<div.+>.*</div>.*)')
# table head
regex_head = re.compile(r'<thead>(.*)</thead>')
# table head col
regex_head_col = re.compile(r'<th>(\w+|\d+)</th>')

regex_tbody = re.compile(r'<tbody>(.*)</tbody>')
regex_t_row = re.compile(r'<tr><td class=.*><a.*>(.*)</a></td>.*</tr>', re.I|re.M)


_t = str(regex_div_table.findall(text))
print _t
t_head = regex_head.findall(_t)
t_head_col = regex_head_col.findall(_t)
t_body = regex_tbody.findall(_t)

#t_body_row = regex_tr.findall(str(t_body))
print str(t_body)

t_body_row = regex_t_row.findall(_t)
for i in t_body_row:
    print i

